# 서브쿼리 프로젝트 신규 버전 배포하기

## 가이드라인

공개된 서브쿼리 프로젝트에 대한 업그레이드 및 신규 버전을 배포하고자 하는 경우, 본 프로세스를 따라주시기 바랍니다. 주의해야 할 주요 포인트는 다음과 같습니다.
- 호환성이 손상되는 업그레이드인 경우에는 새로운 프로젝트(예: `My SubQuery Project V2`)를 생성하거나 소셜 미디어 채널을 통해 커뮤니티에 변경에 대해 충분히 안내해야 합니다.
- 새로운 버전의 서브쿼리 프로젝트 배포 시, 제네시스 블록의 모든 체인에 대한 인덱싱으로 인해 일부 다운타임이 발생할 수 있습니다.

## 신규 버전 배포하기

서브쿼리 프로젝트에 로그인하고 신규 버전을 배포하고자 하는 프로젝트를 선택합니다. 가동 슬롯 또는 스테이징 슬롯에 배포하도록 선택할 수 있습니다. 이 두 슬롯은 서로 격리된 환경에서 각각 자체 데이터베이스를 가지며, 독립적으로 동기화됩니다.

스테이징 슬롯 상 배포는 최종 스테이징 테스트 또는 프로젝트 데이터를 다시 동기화해야 하는 경우에만 권장합니다. 그런 이후에는 다운타임 없이 가동으로 승격이 가능합니다. [프로젝트 로컬 실행](../run/run.md) 시, [보다 쉽게 디버깅](../tutorials_examples/debug-projects.md)이 가능하므로 보다 빠른 테스팅이 가능합니다.

스테이징 슬롯은 다음에 적합합니다.
* 별도의 환경에서 SubQuery 프로젝트의 변경 사항에 대한 최종 유효성 검사. 스테이징 슬롯에는 dApp에서 사용할 수 있는 프로덕션에 대한 다른 URL이 있습니다.
* 업데이트된 SubQuery 프로젝트에 대한 데이터 워밍업 및 인덱싱을 통해 dApp의 다운타임 제거
* 공개하지 않고 SubQuery 프로젝트에 대한 새 릴리즈 준비. 스테이징 슬롯은 Explorer에 공개되지 않으며 프로젝트 관리자에게만 제공되는 고유 URL이 있습니다.

![스테이징 슬롯](/assets/img/staging_slot.png)

#### 최신 인덱스 및 Query 서비스로 업그레이드

최신 인덱스 ([`@subql/node`](https://www.npmjs.com/package/@subql/node)) 또는 Query 서비스 ([`@subql/query`](https://www.npmjs.com/package/@subql/query)) 업그레이드를 통해 정기적인 성능 및 안정성을 향상시키고자 한다면 새로운 버전의 패키지를 선택하고 저장하세요. 이로 인해 단 몇 분간의 다운타임만 발생합니다.

#### 서브쿼리 프로젝트 신규 버전 배포하기

배포하려는 SubQuery 프로젝트 코드베이스 버전의 GitHub에서 커밋 해시를 입력합니다(전체 커밋 해시 복사). 이로 인해 현재 체인을 인덱싱하는 데 걸리는 시간에 따라 다운타임이 발생합니다. 진행상황은 언제든지 여기에 보고할 수 있습니다.

## 다음 단계 - 프로젝트 연결하기
배포가 성공적으로 완료되고 노드가 체인에서 데이터를 인덱스화하면 표출된 GraphQL 쿼리 엔드포인트를 통해 프로젝트에 접속할 수 있습니다.

![배포 및 동기화된 프로젝트](/assets/img/projects-deploy-sync.png)

프로젝트 제목 옆에 있는 3개의 점을 클릭하여 SubQuery 탐색기로 표시할 수도 있습니다. There you can use the in browser playground to get started - [read more about how to user our Explorer here](../query/query.md).
