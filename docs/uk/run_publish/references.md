# Прапори командної лінії

## subql (cli)

### --допомогти

```shell
> subql --довідка

КОМАНДІ
   build Створіть цей код проекту SubQuery
   codegen Створення схем для вузла графа
   help відобразити довідку для subql
   init Ініціалізація проекту підзапиту каркаса
   migrate маніфест проекту Migrate Subquery v0.0.1 до v0.2.0
   publish Завантажте цей проект SubQuery до IPFS
   validate Перевірте те, що папка або репозиторія github є проектом subquery перевірки
```

### build

Ця команда використовує webpack для створення пакета проекту subquery.

| Параметри          | Описання                                                     |
| ------------------ | ------------------------------------------------------------ |
| -l, --location     | локальна папка проекту subquery (якщо ще не в папці)         |
| -o, --output       | Вкажіть вихідну папку збірки, напр. build-folder             |
| --mode=(production | prod | development | dev) | [ за замовчуванням: production ] |

- За допомогою `subql build` ви можете вказати додаткові точки входу в полі експорту, хоча воно завжди збиратиметься `index.ts` автоматично

- Щоб використовувати поле експорту, потрібно мати @subql/cli версії 0.19.0 або вище.

- Будь-яке поле `exports` має відповідати типу рядка (наприклад, `"entry": "./src/file.ts"`), інакше воно ігноруватиметься під час збірки.

[Додатковий приклад](https://doc.subquery.network/create/introduction/#build).

## subql-node

### --допомогти

Тут показані варіанти допомоги.

```shell
> subql-вузол --довідка
Параметри:
      --help Показати довідку [boolean]
      --version Показати номер версії [boolean]
  -f, --subquery Локальний шлях проекту subquery [рядок]
      --subquery-name Назва проекту subquery [застаріло] [рядок]
  -c, --config Вкажіть файл конфігурації [рядок]
      --local Використовувати локальний режим [застарілий] [логічний]
      --force-clean Примусово очистити базу даних, видаливши схеми проекту
                            і таблиці [логічні значення]
      --db-schema Назва схеми БД проекту [рядок]
      --unsafe Дозволяє використовувати будь-який вбудований модуль в межах
                            пісочниця [boolean][за замовчуванням: false]
      --batch-size Розмір пакету блоків для отримання за один раунд [число]
      --scale-batch-size масштабує розмір пакету на основі використання пам'яті
                                                      [логічний] [за замовчуванням: false]
      --timeout Тайм-аут для пісочниці індексатора для виконання зіставлення
                            функції [число]
      --debug Показати інформацію про налагодження для виводу консолі. буде
                             примусово встановити рівень журналу для налагодження
                                                       [логічний] [за замовчуванням: false]
       --profiler Показати інформацію про профільувальник у виводі консолі
                                                       [логічний] [за замовчуванням: false]
       --subscription Увімкнути підписку [логічний] [за замовчуванням: false]
       --network-endpoint кінцева точка мережі Blockchain для підключення [рядок]
       --output-fmt Роздрукувати журнал як json або звичайний текст
                                            [рядок] [вибір: "json", "кольоровий"]
       --log-level Вкажіть рівень журналу для друку. Ігнорується, коли --debug є
                             використаний
           [рядок] [вибір: "фатальний", "помилка", "попередження", "інформація", "налагодження", "відстежування",
                                                                        "тихий"]
       --migrate Перенести схему БД (лише для таблиць керування)
                                                       [логічний] [за замовчуванням: false]
       --timestamp-field Увімкнути/вимкнути created_at та updated_at у схемі
                                                       [логічний] [за замовчуванням: false]
   -d, --network-dictionary Вкажіть API словника для цієї мережі [рядок]
   -m, --mmr-path Локальний шлях до файлу гірського хребта Меркла (.mmr).
                                                                         [рядок]
       --proof-of-index Увімкнути/вимкнути підтвердження індексу
                                                       [логічний] [за замовчуванням: false]
   -p, --port Порт, до якого служба буде прив'язана [число]
```

### --версія

Це відображає поточну версію.

```shell
> subql-node --version
0.19.1
```

### -f, --subquery

Використовуйте цей прапор, щоб запустити проект SubQuery.

```shell
підql-вузол -f. // OR
subql-node --subquery .
```

### --subquery-name (не підтримується)

Цей прапорець дозволяє вам надати назву для вашого проекту, яка діє так, ніби створюється екземпляр вашого проекту. Після введення нового імені створюється нова схема бази даних і блокова синхронізація починається з нуля. Не підтримується на користь `--db-schema`

```shell
підql-вузол -f. --subquery-name=test2
```

### -c, --config

Усі ці різноманітні конфігурації можна помістити у файл .yml або .json, а потім посилатися на нього за допомогою прапорця конфігурації.

Зразок файлу subquery_config.yml:

```shell
subquery: . // Mandatory. Це локальний шлях проекту. Крапка тут означає поточний локальний каталог.
subqueryName: hello // Необов'язкове ім'я
batchSize: 55 // Додаткова конфігурація
```

Розмістіть цей файл у тому самому каталозі, що й проект. Потім у поточному каталозі проекту запустіть:

```shell
> subql-node -c ./subquery_config.yml
```

### -local (застарів)

Цей прапор в основному використовується для налагодження, коли він створює таблицю starter_entity за замовчуванням у схемі postgres за замовчуванням.

```shell
підql-вузол -f. --local
```

Зауважте, що як тільки ви використовуєте цей прапор, його видалення не означатиме, що він вказуватиме на іншу базу даних. Щоб повторно вказати на іншу базу даних, вам доведеться створити НОВУ базу даних і змінити налаштування env на цю нову базу даних. Іншими словами, "export DB_DATABASE=<new_db_here>"

### --force-clean

Цей прапорець змушує схеми та таблиці проекту відновлюватися, що корисно використовувати під час ітеративної розробки схем graphql, щоб нові запуски проекту завжди працювали в чистому стані. Зауважте, що цей прапор також видалить усі індексовані дані.

### --db-схема

Цей прапорець дозволяє надати ім’я для схеми бази даних проекту. Після надання нового імені створюється нова схема бази даних із налаштованим ім’ям і починається індексація блоків.

```shell
підql-вузол -f. --db-schema=тест2
```

### --підписка
Це створить активатор сповіщень для сутності, це також є необхідною умовою для ввімкнення функції підписки в службі запитів.

### --unsafe

Проєкти SubQuery зазвичай запускаються в пісочниці javascript для безпеки, щоб обмежити обсяг доступу проекту до вашої системи. Пісочниця обмежує доступний імпорт JavaScript до таких модулів:

```javascript
["assert", "buffer", "crypto", "util", "path"];
```

Хоча це підвищує безпеку, ми розуміємо, що це обмежує доступні функції вашого Хоча це підвищує безпеку, ми розуміємо, що це обмежує доступні функції вашого SubQuery. Команда `--unsafe` імпортує всі модулі JavaScript за замовчуванням, що значно розширює функціональність пісочниці за рахунок зниження безпеки.

**Зверніть увагу, що команда `--unsafe` не дозволить вашому проєкту запустити в підпроцесній мережі, і ви повинні звернутися в службу підтримки, якщо хочете, щоб ця команда працювала з вашим проєкт в сервісі керування SubQuery ([проекті. ubquery.network](https://project.subquery.network))**

### --batch-size

Цей прапорець дозволяє встановити розмір пакету в командному рядку. Якщо розмір пакету також встановлено у файлі конфігурації, це має прецедент.

```shell
> subql-node -f . --batch-size=20
2021-08-09T23:24:43.775Z <fetch> INFO fetch block [6601,6620], total 20 blocks
2021-08-09T23:24:45.606Z <fetch> INFO fetch block [6621,6640], total 20 blocks
2021-08-09T23:24:47.415Z <fetch> INFO fetch block [6641,6660], total 20 blocks
2021-08-09T23:24:49.235Z <fetch> INFO fetch block [6661,6680], total 20 blocks
```

### --Розмір масштабування

Масштабуйте розмір пакету вибору блоку з використанням пам’яті

### тайм-аут

Встановіть спеціальний тайм-аут для пісочниці javascript для виконання функцій зіставлення над блоком, перш ніж функція відображення блоку видає виняток часу очікування

### --debug

Це виводить інформацію про налагодження на вихід консолі та примусово встановлює рівень журналу на налагодження.

```shell
> subql-node -f . --debug
2021-08-10T11:45:39.471Z <db> DEBUG Executing (1b0d0c23-d7c7-4adb-a703-e4e5c414e035): INSERT INTO "subquery_1"."starter_entities" ("id","block_height","created_at","updated_at") VALUES ($1,$2,$3,$4) ON CONFLICT ("id") DO UPDATE SET "id"=EXCLUDED."id","block_height"=EXCLUDED."block_height","updated_at"=EXCLUDED."updated_at" RETURNING "id","block_height","created_at","updated_at";
2021-08-10T11:45:39.472Z <db> DEBUG Executing (default): UPDATE "subqueries" SET "next_block_height"=$1,"updated_at"=$2 WHERE "id" = $3
2021-08-10T11:45:39.472Z <db> DEBUG Executing (1b0d0c23-d7c7-4adb-a703-e4e5c414e035): COMMIT;
```

### --profiler

Це показує інформацію профайлера.

```shell
підql-вузол -f. --local --profiler
2021-08-10T10:57:07.234Z <profiler> INFO FetchService, fetchMeta, 3876 ms
2021-08-10T10:57:08.095Z <profiler> INFO FetchService, fetchMeta, 774 ms
2021-08-10T10:57:10.361Z <profiler> INFO SubstrateUtil, fetchBlocksBatches, 2265 ms
2021-08-10T10:57:10.361Z <fetch> INFO fetch block [3801,3900], total 100 blocks
```

### --кінцева точка мережі

Цей прапор дозволяє користувачам змінювати конфігурацію кінцевої точки мережі з файлу маніфесту.

```shell
підql-вузол -f. --network-endpoint="wss://polkadot.api.onfinality.io/public-ws"
```

Зауважте, що це також має бути встановлено у файлі маніфесту, інакше ви отримаєте:

```shell
ПОМИЛКА Створіть проект Subquery з заданого шляху! Помилка: не вдалося проаналізувати проект.yaml.
Примірник ProjectManifestImpl не пройшов перевірку:
  - мережа властивостей не відповідає таким обмеженням: isObject
  - властивість network.network не відповідає таким обмеженням: nestedValidation
```

### --output-fmt

Існує два різних формати виводу терміналів. JSON або кольоровий. Кольоровий є за замовчуванням і містить кольоровий текст.

```shell
> subql-node -f . --output-fmt=json
{"level":"info","timestamp":"2021-08-10T11:58:18.087Z","pid":24714,"hostname":"P.local","category":"fetch","message":"fetch block [10501,10600], total 100 blocks"}
```

```shell
> subql-node -f . --output-fmt=кольоровий
2021-08-10T11:57:41.480Z <subql-node> Запущено вузол INFO
(node:24707) [PINODEP007] Попередження: bindings.level не підтримується, замість цього використовуйте параметр options.level
2021-08-10T11:57:48.981Z <fetch> Блок отримання INFO [10201,10300], всього 100 блоків
2021-08-10T11:57:51.862Z <fetch> Блок отримання INFO [10301,10400], всього 100 блоків
```

### --log-рівень

Є 7 варіантів на вибір. “фатальний”, "помилка", "попередження", "інформація", "налагодження", "простеження", "мовчати". Нижче наведено приклад без звуку. У терміналі нічого не буде надруковано, тож єдиний спосіб дізнатися, працює вузол чи ні, — це запитати кількість рядків до бази даних (вибрати count(\*) із subquery_1.starter_entities) або запитати висоту блоку.

```shell
> subql-node -f . --log-level=тихий
(node:24686) [PINODEP007] Попередження: bindings.level не підтримується, замість цього використовуйте параметр options.level
(Використовуйте `node --trace-warnings ...`, щоб показати, де було створено попередження)
(node:24686) [PINODEP007] Попередження: bindings.level не підтримується, замість цього використовуйте параметр options.level
(node:24686) [PINODEP007] Попередження: bindings.level не підтримується, замість цього використовуйте параметр options.level
(node:24686) [PINODEP007] Попередження: bindings.level не підтримується, замість цього використовуйте параметр options.level
(node:24686) [PINODEP007] Попередження: bindings.level не підтримується, замість цього використовуйте параметр options.level
(node:24686) [PINODEP007] Попередження: bindings.level не підтримується, замість цього використовуйте параметр options.level
(node:24686) [PINODEP007] Попередження: bindings.level не підтримується, замість цього використовуйте параметр options.level
(node:24686) [PINODEP007] Попередження: bindings.level не підтримується, замість цього використовуйте параметр options.level
(node:24686) [PINODEP007] Попередження: bindings.level не підтримується, замість цього використовуйте параметр options.level
(вузол: 24686) [DEP0152] Попередження про депресію: спеціальні засоби доступу PerformanceEntry не підтримуються. Будь ласка, використовуйте детальнішу властивість.
(node:24686) [PINODEP007] Попередження: bindings.level не підтримується, замість цього використовуйте параметр options.level
```

<!-- ### --migrate TBA -->

### --timestamp-field

За замовчуванням це правда. коли встановлено значення false з:

```shell
> subql-node -f . –timestamp-field=false
```

Це видаляє стовпці created_at та updated_at у таблиці starter_entities.

### -d, --мережа-словник

Це дозволяє вказати кінцеву точку словника, яка є безкоштовною службою, яка надається та розміщена за адресою: [https://explorer.subquery.network/](https://explorer.subquery.network/) (шукати словник) і представляє кінцеву точку API: https ://api.subquery.network/sq/subquery/dictionary-polkadot

Зазвичай це встановлюється у вашому файлі маніфесту, але нижче показано приклад використання його як аргументу в командному рядку.

```shell
підql-вузол -f. -d "https://api.subquery.network/sq/subquery/dictionary-polkadot"
```

[ Детальніше про те, як працює SubQuery Dictionary ](../academy/tutorials_examples/dictionary.md).

### -p, --порт

Порт, до якого прив’язується служба індексування subquery. За замовчуванням для нього встановлено значення `3000`

## subql-query

### --допомогти

Тут показані варіанти допомоги.

```shell
Параметри:
       --help Показати довідку [boolean]
       --version Показати номер версії [boolean]
   -n, --name Назва проекту [рядок] [обов'язково]
       --playground Увімкнути graphql playground [boolean]
       --subscription Увімкнути підписку [логічний] [за замовчуванням: false]
       --output-fmt Роздрукувати журнал як json або звичайний текст
                         [рядок] [вибір: "json", "кольоровий"] [за замовчуванням: "кольоровий"]
       --log-level Вкажіть рівень журналу для друку.
            [рядок] [вибір: "фатальний", "помилка", "попередження", "інформація", "налагодження", "відстежування",
                                                        "тихий"] [за замовчуванням: "інформація"]
       --log-path Шлях для створення файлу журналу, наприклад ./src/name.log [рядок]
       --log-rotate Обертати файли журналів у каталозі, визначеному шляхом журналу
                                                       [логічний] [за замовчуванням: false]
       --indexer Url, що дозволяє запиту отримати доступ до метаданих індексатора [рядок]
       --unsafe Вимкнути обмеження на глибину запиту та повернене допустиме число
                       записи запиту [логічне значення]
   -p, --port Порт, до якого служба буде прив'язана [число]
```

### --версія

Це відображає поточну версію.

```shell
> subql-query --version
0.7.0
```

### -n, --ім'я

Цей прапор використовується для запуску служби запитів. Якщо прапорець --subquery-name не вказано під час запуску індексатора, ім'я тут посилатиметься на назву проекту за замовчуванням. Якщо встановлено параметр --subquery-name, тоді ім’я тут має відповідати тому, що було встановлено.

```shell
> subql-node -f . // --назва-subquery не встановлено

> subql-query -n subql-helloworld --playground // ім'я за замовчуванням відповідає імені каталогу проекту
```

```shell
> subql-node -f . --subquery-name=hiworld // --набір імені-subquery

> subql-query -n hiworld --playground // назва вказує на проект subql-helloworld, але з назвою hiworld
```

### Ігрове поле

Цей прапор включає ігровий майданчик graphql, тому його завжди слід включати за замовчуванням, щоб він був корисним.

### --output-fmt

Дивіться [--output-fmt](https://doc.subquery.network/run_publish/references.html#output-fmt)

### --log-рівень

Дивіться [--log-level](https://doc.subquery.network/run_publish/references.html#log-level)

### --log-шлях

Увімкніть журналювання файлів, вказавши шлях до файлу для входу

### --log-rotate

Увімкнути ротацію журналу файлів із параметрами інтервалу обертання 1d, максимум 7 файлів і з максимальним розміром файлу 1 ГБ

### --індексатор

Установіть спеціальну URL-адресу для розташування кінцевих точок індексатора, служба запитів використовує ці кінцеві точки для працездатності, метаданих і стану готовності індексатора

### --підписка

Цей прапор включає [Підписки GraphQL](./subscription.md), щоб увімкнути цю функцію, потрібно `subql-node` також увімкнути `--subscription`

### --unsafe

Служба запитів має обмеження в 100 сутностей для необмежених запитів graphql. Прапор небезпечного знімає це обмеження, що може спричинити проблеми з продуктивністю служби запитів. Натомість рекомендується [розбити на сторінки](https://graphql.org/learn/pagination/) запити.

Этот флаг позволяет использовать некоторые функции агрегирования, включая sum, max, avg и другие. Дізнайтеся більше про цю функцію [тут](./aggregate.md)

Вони вимкнені за замовчуванням через обмеження об’єктів.

**Зауважте, що команда `--unsafe` запобігає запуску вашого проекту в мережі SubQuery, і ви повинні звернутися в службу підтримки, якщо хочете, щоб ця команда запускалася з вашим проектом у проекті [керованої служби SubQuery .subquery.network](https://project.subquery.network).**

### --порт

Порт, до якого прив’язується служба запитів підзапитів. За замовчуванням для нього встановлено значення `3000`
