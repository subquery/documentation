# SubQueryプロジェクトの新しいバージョンをデプロイする

## ガイドライン

SubQueryプロジェクトは、常に新しいバージョンをアップグレードしてデプロイする自由がありますが、SubQueryプロジェクトが世界に公開されている場合は、このプロセスに配慮してください。 注意すべきいくつかの重要なポイント:
- アップグレードが破損した変更である場合、新しいプロジェクトを作成するか（例：`My SubQuery Project V2`）、ソーシャルメディアチャンネルを通じてコミュニティに変更の警告を十分に行ってください。
- 新しいSubQueryプロジェクトのバージョンをデプロイすると、新しいバージョンが生成ブロックから完全なチェーンのインデックスを作成するため、ダウンタイムが発生します。

## 変更をデプロイする

SubQuery Project にログインし、新しいバージョンをデプロイするプロジェクトを選択します。 本番またはステージングスロットにデプロイするかを選択できます。 この2つのスロットは分離された環境で、それぞれ独自のデータベースを持ち、独立して同期をとっています。

ステージングスロットへのデプロイは、最終的なステージングテストやプロジェクトデータの再同期が必要な場合のみ行うことをお勧めします。 その後、ダウンタイムなしで本番環境に昇格させることができます。 [課題をより簡単にデバッグ](../tutorials_examples/debug-projects.md)できるので、 [ローカルでプロジェクトを実行](../run/run.md)するとテストが速くなります。

ステージングスロットは以下の場合に最適です：
* SubQuery Projectの変更を別環境で最終検証します。 ステージングスロットは、dAppsで使用できる本番環境とは異なるURLを持っています。
* 更新されたSubQueryプロジェクトのデータのウォームアップとインデックス作成により、dAppのダウンタイムをなくすことができます
* 公開せずに、SubQuery プロジェクトの新しいリリースを準備します。 ステージングスロットはエクスプローラでは公開されず、あなただけに表示される固有のURLを持っています。

![ステージングスロット](/assets/img/staging_slot.png)

#### 最新のインデクサとクエリサービスにアップグレードする

もし、最新のインデクサ ([`@subql/node`](https://www.npmjs.com/package/@subql/node)) やクエリーサービス ([`@subql/query`](https://www.npmjs.com/package/@subql/query)) にアップグレードして定期的にパフォーマンスと安定性を改善したいだけなら、新しいバージョンのパッケージを選択して保存するだけでよいのです。 これはわずか数分間のダウンタイムを引き起こします。

#### SubQueryプロジェクトの新しいバージョンをデプロイする

デプロイしたいSubQueryプロジェクトのコードベースのバージョンのGitHubからコミットハッシュ（完全なコミットハッシュをコピー）を記入する。 これは現在のチェーンをインデックスするのにかかる時間に応じて、より長いダウンタイムを引き起こします。 いつでもここで進捗状況を確認することができます.

## 次のステップ - プロジェクトに接続
デプロイが正常に完了し、ノードがチェーンからデータのインデックスを作成したら、表示されたGraphQLクエリエンドポイントからプロジェクトに接続することができるようになります。

![プロジェクトを展開および同期する](/assets/img/projects-deploy-sync.png)

または、プロジェクトのタイトルの横にある3つの点をクリックして、SubQuery Explorer で表示することもできます。 ブラウザ内のプレイグラウンドを使用して始めることができます - [Explorerの使い方についてはこちら](../query/query.md) をご覧ください。
