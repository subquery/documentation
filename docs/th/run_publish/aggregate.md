# ฟังก์ชั่นการรวม

## จัดกลุ่มโดย

SubQuery รองรับฟังก์ชันการรวมขั้นสูงเพื่อให้คุณสามารถคำนวณชุดของค่าต่าง ๆ ในระหว่างการสืบค้นของคุณได้

โดยฟังก์ชันการรวมมักใช้กับฟังก์ชัน GroupBy ในการสืบค้น

ซึ่ง GroupBy นั้นจะช่วยให้คุณรับค่าที่แตกต่างกันอย่างรวดเร็วในชุดจาก SubQuery ในการสืบค้นเพียงครั้งเดียว

![Graphql Groupby](/assets/img/graphql_aggregation.png)

## ฟังก์ชั่นการรวมขั้นสูง

SubQuery มีฟังก์ชันการรวมต่อไปนี้เมื่ออยู่ในโหมดที่ไม่ปลอดภัย:

- `sum` (ใช้กับช่องตัวเลข) - ผลลัพธ์ของการเพิ่มค่าทั้งหมดเข้าด้วยกัน
- `distinctCount` (ใช้กับทุกช่อง) - การนับจำนวนค่าที่ไม่ซ้ำ
- `min` (ใช้กับช่องตัวเลข) - ค่าที่น้อยที่สุด
- `max` (ใช้กับช่องตัวเลข) - ค่าที่มากที่สุด
- `average` (ใช้กับช่องตัวเลข) - ค่าเฉลี่ย (ค่าเฉลี่ยเลขคณิต)
- `stddevSample` (ใช้กับช่องตัวเลข) - ค่าเบี่ยงเบนมาตรฐานตัวอย่าง
- `stddevPopulation` (ใช้กับช่องตัวเลข) - ค่าเบี่ยงเบนมาตรฐานประชากร
- `varianceSample` (ใช้กับช่องตัวเลข) - ความแปรปรวนตัวอย่าง
- `variancePopulation` (ใช้กับช่องตัวเลข) - ความแปรปรวนประชากร

การใช้งานฟังก์ชันการรวมของ SubQuery ขึ้นอยู่กับ [pg-aggregates](https://github.com/graphile/pg-aggregates) ซึ่งคุณสามารถหาข้อมูลเพิ่มเติมได้จากลิ้งค์

**โปรดทราบว่าคุณต้องเปิดใช้งาน `--unsafe` ในบริการสืบค้นข้อมูลเพื่อใช้ฟังก์ชันเหล่านี้ [Read more](./references.md#unsafe-2). และโปรดทราบว่าคำสั่ง `--unsafe` จะป้องกันไม่ให้โปรเจ็กของคุณทำงานในเครือข่าย SubQuery และคุณต้องติดต่อฝ่ายสนับสนุนหากต้องการให้คำสั่งนี้รันกับโปรเจ็กของคุณในบริการที่มีการจัดการของ SubQuery ([project.subquery.network](https://project.subquery.network))**
