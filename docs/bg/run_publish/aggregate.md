# Агрегираща функция

## Групиране по

SubQuery поддържа разширени агрегатни функции, които ви позволяват да извършвате изчисление на набор от стойности по време на вашата заявка.

Агрегатните функции обикновено се използват с функцията GroupBy във вашата заявка.

GroupBy ви позволява бързо да получите набор от различни стойности от SubQuery в една заявка.

![Graphql Groupby](/assets/img/graphql_aggregation.png)

## Разширени агрегатни функции

SubQuery предоставя следните агретатни функции, когато е в небезопасен режим:

- `sum` (отнася се за полета, подобни на числа) - резултат от събирането на всички стойности заедно
- `distinctCount` (прилага се за всички полета) - броят на различни стойности
- `min` (отнася се за полета, подобни на числа) - най-малката стойност
- `max` (отнася се за полета, подобни на числа) - най-голямата стойност
- `average` (отнася се за полета, подобни на числа) - средната (средноаритметична) стойност
- `stddevSample` (отнася се за полета, подобни на числа) - стандартното отклонение на извадката на стойностите
- `stddevPopulation` (прилага се за полета, подобни на числа) - стандартното отклонение на популацията на стойностите
- `varianceSample` (отнася се за полета, подобни на числа) - примерната дисперсия на стойностите
- `variancePopulation` (отнася се за полета, подобни на числа) - дисперсията на населението на стойността

Внедряването на агрегатни функции от SubQuery се основава на [pg-aggregates](https://github.com/graphile/pg-aggregates), можете да намерите повече информация там

**Моля, имайте предвид, че трябва да активирате флага `--unsafe` на услугата за заявки, за да използвате тези функции. [Прочетете още](./references.md#unsafe-2). Обърнете внимание, че командата `--unsafe` ще попречи на вашия проект да се изпълнява в SubQuery мрежата и трябва да се свържете с поддръжката, ако искате тази команда да се изпълнява с вашия проект в управляваната услуга на SubQuery ([project.subquery.network](https://project.subquery.network))**
