# 索引者

## 什么是索引者？

索引者是 SubQuery 网络参与者，负责索引区块链数据并向客户提供这种数据。

索引者在SubQuery网络中发挥着非常重要的作用。 作为数据服务业务的一部分，索引者将计算和联网功率转变为利润。

## 索引者权益质押

为了从作为索引器的查询收入中获得回报，建议索引者必须在他们提供服务的特定的 SubQuery 项目中订购SQT 。 Cobb-Douglas生产功能将用于确定分配给每个索引者的奖励。

SubQuery 计划为网络添加一个约束，即索引者必须在相关奖励池中拥有最低数量的 SQT 才能参加匹配的开放协议。 它们还必须以同样方式在任何封闭协定的同等风险合同上承担最低数额。 这个指数化的最低值必须是协议每个时代奖励值的特定百分比。 这意味着要将协定延长到更高的卷宗，索引者还必须增加它们的利害关系。 当索引者的质押低于这个最低金额时，它们将无法以现有价格续延协定。

如果索引者被发现错误(例如提供无效、不完整或不正确的数据)， 他们有责任将他们的Staked SQT（关于特定奖励池）的一部分重新分配给SubQuery基金会财务处。 减少他们在网络中所持的 SQT ，因而减少他们的潜在奖励。 因为索引者分配的股份是由他们SQT总额的百分比决定的， 这将对索引者所加入的所有其他奖励池产生影响。

## 索引者如何获取奖励?

索引者以两种方式在 SQT 中获得奖励：
- 基于 Cobb-Douglas 生产功能定义的分布，来自SQT 奖励池的奖励。
- 索引者从封闭协议中直接获得SQT查询费奖励。

索引者会被奖励消费者因提供消费者要求的区块链数据而支付的费用。 索引者将从封闭协议中收取所有费用。 否则， 费用根据完成的工作量(请求已送达) 和授权的 SQT 金额进行拆分——这种拆分是通过应用Cobb-Douglas Production 功能来确定的。

给定索引者可能同时激活多个奖励池。 索引者的工作是在这些池中分配他们的分级和委派的 SQT (占其总SQT的百分比)。 索引者接受PAYG的每个项目都有奖励池。 并为索引者所缔结的每一项市场协定提供奖励库。

## 吸引委托者

指数化可以通过吸引委托者来增加他们的收入潜力。 委托者成员是 SQT 代币持有者，可以将其代币分配给索引者以获得额外奖励。 索引者使用这些额外的代币来增加分配给他们选择的项目的金额。 这使索引者能够增加收入。

索引者设置索引者的佣金率 (ICR) 是索引者赚取的百分比。 其余部分随后由索引者和所有代表按预定/授权数额分摊。 因此，索引者需要决定索引者希望保留的利润相对于与代表分享的数额的比例。 较低的ICR对委托方更有吸引力。

例如，Indexer A将ICR 设定为80%，并从8名委托者收到了SQT。 这意味着8名委托者加上索引者本身将得到索引者剩余20%收入的奖励。 份额将按比例在它们之间分配。 请注意，委托者必须已经授予他们的代币，才有资格获得这些奖励。 关于代表奖励的更多信息，请参阅 [Delegators](./delegators.md)。

## 成为索引者

要成为SubQuery网络的索引者，索引者必须拥有必要的硬件，运行所需的SubQuery服务。 有一个通过静态IP或域名公开可访问的网络，并注册为索引者。

### 索引器技能集

一般而言，索引者应是技术熟练的计算机用户。 然而，SubQuery网络和拟议框架的简单性甚至使初级开发者能够成功地参与。

基本用户应该熟悉提供和管理服务器，安装 SubQuery CLI 工具、数据库管理和基本网络。 经验丰富的用户可以在集群环境中运行节点，纳入监测和警示以及更先进的网络管理。

最后，有关各方应准备投入时间维持其索引节点和基础设施。

### 质押要求

索引者预计会有利害关系并保持最低数量的代币。 这是为了确保索引者在游戏中有一些皮肤并致力于支持网络。 SubQuery 尚未确定这一点，但这是我们 [的设计哲学](./design-philosophy.md) 中的一种，它尽可能低并且容易获得。

如果一个索引器经历一个可闪烁的事件，它们的 SQT 余额低于所需的最低值。 他们必须充值他们的Staked SQT才能继续从他们的工作中获得奖励。

### 硬件要求:

索引者可以对自己的基础设施硬件进行投资，也可以从喜欢的AWS、谷歌云、数字大洋、微软Azure等地租赁基础设施。

### 维修/业务要求

以下是一些维护和/或业务需求索引者应该期望：

- 总是升级到最新的SubQuery软件版本。
- 查明并利用新的索引机会。
- 更新项目版本到最新版本，并在必要时重新索引。
- 基础结构管理器
  - 不断监视和调整磁盘大小。
  - 基于流量的右尺寸查询和索引计算。
  - 增加查询服务以增加流量。

### 基础架构

最低限度的基础设施要求包括：

- 至少有一个计算节点来运行以下服务：
  - [Node (indexing) Service](https://www.npmjs.com/package/@subql/node).
  - [Query Service](https://www.npmjs.com/package/@subql/query).
  - [Indexer Coordinator Service](https://www.npmjs.com/package/@subql/indexer-coordinator).
- 运行Postgresql db (v12及以上) 的数据库节点。

更详细的信息会在不就得将来发布。

## 安全 & 性能考虑

安全和业绩方面的考虑如下。

### 操作员钱包

强烈建议安全存储索引器的钱包恢复种子短语。

### 防火墙

索引者需要保持安全心理。 基础设施安全，特别是防火墙，应当加以实施，以防止公众接触到个人端口。

安全密码应默认使用，并应考虑密码旋转策略。

### 索引者的成绩

为了产生理想的业绩，索引员需要考虑各种因素，例如：

- (c) 在代表们的利益之间保持平衡。
- 所提供的合同类型。 如果索引者收到的是封闭的合同，它将收到所有查询费用。 如果它是开放的，那么索引者的奖励将取决于还有多少其他索引者。
- 《服务级协议》的具体规定得到执行(以避免罚金)。
- 为避免罚金，所提供的数据准确无误。

## 选择SubQuery项目到索引

索引者在选择要索引的SubQuery项目时需要考虑若干指标。

### 查询费用的商机

有些项目将有消费者公布的开放或封闭计划。

当一个消费者为一个项目发布一个开放或关闭的计划时， 它们最终具体说明它们愿意为一定数量的请求付款的程度。 消费者越愿意支付，项目就越吸引力越大。 它还使人相信，这个SubQuery项目很可能会有经常性的收入。

### 项目的复杂性

项目在计算要求方面会有差异。 简单的项目只能索引几个参数，而较复杂的项目则需要更多的计算资源和更多的带宽。 索引者需要了解项目的复杂性及其硬件能力。

### 索引者比赛

最受欢迎的项目提供了一个高查询量，吸引了大量索引者。 这也意味着奖励将由更多的人分享。 单个索引者的份额可能低于较不受欢迎的项目，但查询费略低，但索引者却少得多。

### 价格策略

索引者需要了解他们的操作成本和预期收入，以了解他们的突破点。 以下是一些考虑因素：

- 索引者应如何确定其计划价格？
- 索引者能以何种价格接受一项服务协议？

### 广告

索引员需要将自己广告给代表和消费者。 索引者可以从自己的网站、SubQuery论坛或被认为必要的任何其他地方这样做。 提供资料的一些例子包括：

- 索引者或索引者团队的背景和经验。
- 硬件方法和为什么它提供了优秀的性能。
- 客户支持政策或服务级协议。
- 历史优秀成绩的证据。

### 客户支持

非常鼓励索引员向客户提供一种沟通方法，让他们报告不存在的情况，并提供反馈。
